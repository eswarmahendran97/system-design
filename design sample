Question:
Build a system where users can request rides, drivers can accept and complete rides, and the system manages matching, payments, and tracking.

Answer:
FR: System for ride sharing
NFR
Assuming:
Highly scalable and available

Design

Domain
    Online Ride booking
SubDomain
    User Management
    Ride Management
    Payment
Bounded context - Decode the Question
    RideRequest - core
        Enities:
            RideRequestRoot
            RideRequest
                passanger
                driver
                pickPoint
                dropPoint
                price
                status(value object)
            Acl
                makePayment
        Domain event
            Ride confimed
            Ride cancelled
            Ride Requested
            Ride completed
    Payment - supporting
        Enities
            PaymentRoot
            Payment
                id
                price
                status
        Domain event
            Payment done
            Payment rejected
    AddOrUpdatePassangerAccount - supporting
        Enities
            PassangerAccountRoot
            PassangerAccount
                id
                details
        Domain event
            user added
            user updated
    AddOrUpdateDriverAccount - supporting
        Enities
            DriverAccountRoot
            DriverAccountAccount
                id
                details
        Domain event
            driver added
            driver updated

DB design
Assuming it should be scallable and more writes are there
Im using NoSql(ASM tree) like cassandra

Ride{
    driver: driverId
    passanger: passangerId
    payment:{
        paymentId: id,
        status: done
    }
}

Driver{
    ...driverDetails
    Vehicle:[
        {
            id: vehicle1
        },
        {
            id: vehicle2
        }
    ]
}

User{
    ...driverDetails
    Address:{
        ..addressDetails
    }
}


Making application scalable:
Deploy backend in multiplepods
sharding

Improvements:
Adding Rating






Question:
Design a URL Shortener Service (like bit.ly).

Answer:
FR:
Shorten the givenurl
Alias may or may not be provided
NFR:
users: 1m
so 1m req per day
1m % 86400 => 50 rps on high traffic

So, I feel once service is enough


Design

flow:
client -> url -> service -> shortenUrl



Leader-Follower

High level flow
client on write -> leader (writes) -> all consumers (writes)
client on read -> any server(leader or follower) based on LB

RAFT algo
    on each replica.. timeout will be maintained
    Initially all will be Candidate state
    sends request to each other, elects Candidate with less timeout

Design:
     LeaderFollowerService
        setTimeOut() -> Post construct
        read data(int key)
        write data(Object value)
        sendHeartBeat()
        checkLeaderAlive() -> change state
        requestVote()
        electLeader()

